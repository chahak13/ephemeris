<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-05-14 Fri 19:25 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Setup for org-roam and its compatriots</title>
<meta name="author" content="Chahak Mehta" />
<meta name="generator" content="Org Mode" />
<style type="text/css">
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
</style>
<link rel="stylesheet" href="../../../sakura.css" type="text/css"/>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Setup for org-roam and its compatriots</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org8f6c0f3">Zettelkasten</a>
<ul>
<li><a href="#orgd348f4d">Fleeting notes</a></li>
<li><a href="#org4d1d3b9">Permanent notes</a>
<ul>
<li><a href="#org4216890">Literature notes</a></li>
<li><a href="#orga5777f6">Concept notes</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orged9a6a4">Installation</a></li>
<li><a href="#orgf108b1a">Getting started</a></li>
<li><a href="#orgb4029e8">Files</a>
<ul>
<li><a href="#org5fed205">File Titles</a></li>
<li><a href="#org69b95e8">File Tags</a></li>
<li><a href="#orgb33a9c8">File Refer</a></li>
</ul>
</li>
<li><a href="#org8d29bca">Templates</a></li>
<li><a href="#org04498c8">Inserting Links</a></li>
<li><a href="#org5787b03">Graphing</a></li>
<li><a href="#orgb6a6477">Roam protocol</a>
<ul>
<li><a href="#orga49304e">The <code>roam-ref</code> Protocol</a></li>
</ul>
</li>
<li><a href="#org24ac063">Daily-notes</a></li>
<li><a href="#orgf812705">Diagnosing and Repairing Files</a></li>
<li><a href="#org6e1a922">Finding Unlinked References</a></li>
<li><a href="#org041df02"><span class="todo NEXT">NEXT</span> Deft, org-noter, org-roam-bibtex</a>
<ul>
<li><a href="#org74af671">Deft</a></li>
</ul>
</li>
<li><a href="#org553d2ec">Keybindings for <code>org-roam</code> functions</a></li>
<li><a href="#org2d591db"><code>use-package</code> code block</a></li>
</ul>
</div>
</div>
<dl class="org-dl">
<dt>tags</dt><dd><a href=20210512143830-emacs.html>emacs</a></dd>
</dl>

<p>
<code>org-roam</code> is an Emacs package that improves note-taking process in <code>org-mode</code>. Per the manual, <i>Org-roam is a tool for network thought</i>. I've been trying to get into the habit of note-taking and the result of extreme boredom led me to set this up in my system after hearing a lot of good things about it. The complete config block for init.el can be found at the end.
</p>

<div id="outline-container-org8f6c0f3" class="outline-2">
<h2 id="org8f6c0f3">Zettelkasten</h2>
<div class="outline-text-2" id="text-org8f6c0f3">
<p>
<code>Zettelkasten</code> is a German word, and the name of a note taking system that was developed by a German sociologist <b>Niklas Luhmann</b> who used to take notes on cards and then put them into a slip-box. The idea is that, with enough notes linked to each other, one can come up with various ideas to think, write, watch about. This  introduction is, by no means, a good introduction and one should definitely read about Zettelkasten on their own if they find it interesting. <code>org-roam</code> aims to be the slip-box, where every note is a zettel/card of its own.
</p>
</div>

<div id="outline-container-orgd348f4d" class="outline-3">
<h3 id="orgd348f4d">Fleeting notes</h3>
<div class="outline-text-3" id="text-orgd348f4d">
<p>
Notes that are essentially short quick reminders of information or ideas that need to be processed later on, or trashed. I have tried using <code>org-capture</code> for this with a decent amount of success but I plan to try <code>org-roam</code>'s daily notes feature first to have a comparison. These kinds of notes are a central inbox that are to be further refiled and processed into permanent notes.
</p>
</div>
</div>

<div id="outline-container-org4d1d3b9" class="outline-3">
<h3 id="org4d1d3b9">Permanent notes</h3>
<div class="outline-text-3" id="text-org4d1d3b9">
<p>
Permanent notes form the basic structure of the network of notes. They are full-fledged notes that are supposed to be self-explanatory, and can be of two types: <b>literature notes</b> and <b>concept notes</b>.
</p>
</div>

<div id="outline-container-org4216890" class="outline-4">
<h4 id="org4216890">Literature notes</h4>
<div class="outline-text-4" id="text-org4216890">
<p>
Each note is a condensed summary of a particular source of reading (eg. book, website, paper etc.). It can also contain any annotations that are made during the reading. These notes provide an easy access to sift through past readings, and provides a way to retain more consumed information.
</p>
</div>
</div>

<div id="outline-container-orga5777f6" class="outline-4">
<h4 id="orga5777f6">Concept notes</h4>
<div class="outline-text-4" id="text-orga5777f6">
<p>
Concept notes are more in-depth and require more care in authoring. They need to be detailed notes on a particular concept that one can refer to whenever required. They can then be linked to various fleeting or literature notes, which provides a better network of view for that particular concept.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orged9a6a4" class="outline-2">
<h2 id="orged9a6a4">Installation</h2>
<div class="outline-text-2" id="text-orged9a6a4">
<p>
I used the <code>straight.el</code> package manager, with the <code>use-package</code> package as a configuration manager to install and customize <code>org-roam</code> and other packages. This can be done by running the following
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-roam
  :straight t)
</pre>
</div>

<p>
<code>org-roam</code> needs <code>sqlite3</code> to work. Please make sure that it is installed and available to emacs (Check <code>exec-path</code> variable)
</p>
</div>
</div>

<div id="outline-container-orgf108b1a" class="outline-2">
<h2 id="orgf108b1a">Getting started</h2>
<div class="outline-text-2" id="text-orgf108b1a">
<p>
The first step to start using <code>org-roam</code> is to set the <code>org-roam-directory</code> variable. This directory will contain all the notes that are created during the time of using <code>org-roam</code>. We will set this using the <code>:config</code> block in <code>use-package</code>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-roam
  :straight t
  :config
  (setq org-roam-directory "~/org"))
</pre>
</div>

<p>
Org-roam manual recommends using a flat hierarchy to store all the notes, instead of creating a folder hierarchy. I wasn't sure how I felt about that but I decided to go with it anyway. Instead of any form of explicit categorization, links established between the notes should provide a form of grouping.
</p>

<p>
The next step is to enable the minor mode <code>org-roam-mode</code> globally. While this sets up Emacs with several hooks, it is not enabled on startup. To do that, we'll add a hook to the <code>use-package</code> block we've been building.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-roam
  :straight t
  :hook
  ((after-init-hook . org-roam-mode))
  :config
  (setq org-roam-directory "~/org-roam"))
</pre>
</div>

<p>
To build the note cache manually, one needs to use <code>M-x org-roam-db-build-cache</code>. Cache builds might take a while in the first run, but is often very quick in subsequent runs because it only reprocesses modified files.
</p>

<p>
To start taking notes, one of the two functions can be used <code>org-roam-find-file</code> or <code>org-roam-capture</code>. While both of them will create a new file with the provided title, the major difference is that <code>org-roam-find-file</code> will point to the newly created note in the buffer, while <code>org-roam-capture</code> will point the user back to the original buffer, similar to <code>org-capture</code>.
</p>

<p>
To insert links in a note, use <code>M-x org-roam-insert</code>. This will bring up a prompt with a list of titles for existing notes. Selecting an existing entry will create and insert a link to the current file. Entering a non-existent title will create a new note with that title and link it. Org-roam recommends liberal linking of files, facilitating build up of a denser graph of inter-connected notes. To toggle the visibility of backlinks of a note, along with some context, call <code>M-x org-roam</code>.
</p>
</div>
</div>

<div id="outline-container-orgb4029e8" class="outline-2">
<h2 id="orgb4029e8">Files</h2>
<div class="outline-text-2" id="text-orgb4029e8">
<p>
While the bulk of <code>org-roam</code>'s functionality is built up on vanilla org, it adds some extensions and keywords to support additional functionality. 
</p>
</div>

<div id="outline-container-org5fed205" class="outline-3">
<h3 id="org5fed205">File Titles</h3>
<div class="outline-text-3" id="text-org5fed205">
<p>
Each note needs to be prescribed with a title (duh?). This allows quick searching of notes. <code>org-roam</code> adds to the standard <code>+title</code> keyword in org-mode by using an new keyword called <code>#+roam_alias</code>. These aliases are space-delimited quoted strings that can also be used to refer the note while using <code>org-roam</code>. It also provides support for extracting title from the first headline in the file. The default action is to determine titles using <code>#+title</code> and <code>#+roam_alias</code> and if <code>#+title</code> isn't available, then fallback to the first headline. This is useful in topics like "World War 2" where it can also be referred to as "WW2" or "World War II" or such.
</p>

<pre class="example" id="orgf1ee9b7">
#+title: World War 2
#+roam_alias: "WWII" "WW2" "World War II"
</pre>

<p>
Title extraction can be customized using the <code>org-roam-title-sources</code> variable.
</p>
</div>
</div>

<div id="outline-container-org69b95e8" class="outline-3">
<h3 id="org69b95e8">File Tags</h3>
<div class="outline-text-3" id="text-org69b95e8">
<p>
Tags are used as meta-data for files. They facilitate interaction with notes where titles are insufficient. It also provides a good interface for categorization of notes, especially while searching through all notes. By default, tags are extracted from the <code>#+roam_tags</code> property. Tags are space-delimited quoted strings. To customize this behaviour, check <code>org-roam-tag-sources</code> variable.
</p>

<p>
<b>DOUBT</b>: The screenshots show a <code>- tags ::</code> directive. Need to confirm what works.
</p>
</div>
</div>

<div id="outline-container-orgb33a9c8" class="outline-3">
<h3 id="orgb33a9c8">File Refer</h3>
<div class="outline-text-3" id="text-orgb33a9c8">
<p>
Refs are unique identifiers for files. They are declared using the <code>+roam_key</code> and show up as a Ref Backlink in the org-roam link list.
</p>
</div>
</div>
</div>

<div id="outline-container-org8d29bca" class="outline-2">
<h2 id="org8d29bca">Templates</h2>
<div class="outline-text-2" id="text-org8d29bca">
<p>
Org-roam extends the <code>org-capture</code> capabilities for its templating system. Org-roam's capture templates are not completely compatible with <code>org-capture</code>, hence, to modify the templates, use the <code>org-roam-capture-templates</code>. An example template is shown below. This can be added in the <code>:config</code> section of the <code>use-package</code> configuration.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq org-roam-capture-templates
      '(("d" "default" plain (function org-roam--capture-get-point)
	 "%?"
	 :file-name "%&lt;%Y%m%d%H%M%S&gt;-${slug}"
	 :head "#+TITLE: ${title}\n"
	 :unnarrowed t)
	("p" "paper" entry (function org-roam--capture-get-point)
	 "%?"
	 :file-name "%&lt;%Y%m%d%H%M%S&gt;-${slug}"
	 :head "#+TITLE: ${title}\n#+AUTHOR: ${authors}\n"
	 :unnarrowed t)
	))
</pre>
</div>
</div>
</div>

<div id="outline-container-org04498c8" class="outline-2">
<h2 id="org04498c8">Inserting Links</h2>
<div class="outline-text-2" id="text-org04498c8">
<p>
<code>file</code> links for files and <code>id</code> links for headlines are preferred as they ensure that the links will work even without <code>org-roam</code>. <code>file</code> links can be inserted using <code>org-roam-insert</code> whereas links to headlines can be inserted by navigating to the headline and calling <code>org-store-link</code> to store an ID and link into the org-roam database. That link can then be inserted via <code>org-insert-link</code>.
</p>

<p>
Org-roam also extends org linking syntax by adding <code>roam</code> links. Org-roam registers this link type, and interprets the path as follows:
</p>

<ul class="org-ul">
<li><code>[[roam:title]]</code>: links to an org-roam file with title or alias as "title".</li>
<li><code>[[roam:*headline]]</code>: links to the headline "headline" in the current org-roam file.</li>
<li><code>[[roam:title*headline]]</code>: links to the headline "headline" in the org-roam file with title or alias "title"</li>
</ul>
</div>
</div>

<div id="outline-container-org5787b03" class="outline-2">
<h2 id="org5787b03">Graphing</h2>
<div class="outline-text-2" id="text-org5787b03">
<p>
<code>org-roam-server</code> is basically a web application to visualize the org-roam database. It needs to be installed separately and can be done easily using <code>straight.el</code> and <code>use-package</code>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-roam-server
  :straight t
  :config
  (setq org-roam-server-host "127.0.0.1")
  (setq org-roam-server-port 8080)
  (setq org-roam-server-authenticate nil)
  (setq org-roam-server-export-inline-images t)
  (setq org-roam-server-serve-files nil)
  (setq org-roam-server-served-file-extensions '("pdf" "mp4" "ogv"))
  (setq org-roam-server-network-poll t)
  (setq org-roam-server-network-arrows nil)
  (setq org-roam-server-network-label-truncate t)
  (setq org-roam-server-network-label-truncate-length 60)
  (setq org-roam-server-network-label-wrap-length 20)
  (org-roam-server-mode)
  )
</pre>
</div>

<p>
<code>org-roam-server-mode</code> will enable the global mode. This will start a web server on <a href="http://127.0.0.1:8080">http://127.0.0.1:8080</a> that can be accessed for the org-roam visualization. To open the note on clicking a node, the <code>org-roam-protocol</code> needs to be set up, which is done in the next section.
</p>
</div>
</div>
<div id="outline-container-orgb6a6477" class="outline-2">
<h2 id="orgb6a6477">Roam protocol</h2>
<div class="outline-text-2" id="text-orgb6a6477">
<p>
To enable org-roam's protocol extensions, add the following to emacs init file
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-roam-protocol
  :after org-roam)
</pre>
</div>

<p>
I had to make a desktop application file for <code>emacsclient</code> to use <code>org-protocol</code>. It can be made on Linux platforms by creating a file in <code>~/.local/share/applications/</code> directory. An example file is shown below
</p>

<pre class="example" id="orgdf404e2">
[Desktop Entry]
Name=Org-Protocol
Exec=emacsclient %u
Icon=emacs-icon
Type=Application
Terminal=false
MimeType=x-scheme-handle/org-protocol
</pre>
</div>

<div id="outline-container-orga49304e" class="outline-3">
<h3 id="orga49304e">The <code>roam-ref</code> Protocol</h3>
<div class="outline-text-3" id="text-orga49304e">
<p>
This protocol finds or creates a new note with a given <code>roam_key</code>. This is one of the most appealing features of <code>org-roam</code> for me. I'm guessing that this in conjunction with Zotero will make my note-taking life much easier on the web. To use this, a bookmarklet needs to be created in the browser. For my choice, that is currently Firefox. The steps to create a bookmarklet are
</p>

<ol class="org-ol">
<li>Add a new bookmark from the bookmarks toolbar.</li>
<li>In the name field, add the required name for the bookmark.</li>
<li><p>
In the location field, add the following code
</p>

<div class="org-src-container">
<pre class="src src-javascript">javascript:location.href =
    'org-protocol://roam-ref?template=w&amp;ref='
    + encodeURIComponent(location.href)
    + '&amp;title='
    + encodeURIComponent(document.title)
    + '&amp;body='
    + encodeURIComponent(window.getSelection())
</pre>
</div></li>
</ol>
<p>
Here, <code>template</code> is the template key for a template in <code>org-roam-capture-ref-templates</code>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq org-roam-capture-ref-templates
      '(("r" "ref" plain (function org-roam-capture--get-point)
	 "%?"
	 :file-name "%&lt;%Y%m%d%H%M%S&gt;-${slug}"
	 :head "#+TITLE: ${title}\n#+roam_key: ${ref}"
	 :unnarrowed t)
	("w" "webpage" plain (function org-roam--capture-get-point)
	 "/${body}/"
	 :file-name "%&lt;%Y%m%d%H%M%S&gt;-${slug}"
	 :head "#+TITLE: ${title}\n#+roam_key: ${ref}\n\n"
	 :unnarrowed t)
	))

</pre>
</div>

<p>
Now, I can simply click on this bookmarklet from whatever website/article I am looking at, to directly create a note in emacs using org-roam. With the <code>webpage</code> template, I write down the selected text from the browser into the top of the body of the note, in italics.
</p>
</div>
</div>
</div>

<div id="outline-container-org24ac063" class="outline-2">
<h2 id="org24ac063">Daily-notes</h2>
<div class="outline-text-2" id="text-org24ac063">
<p>
Org-roam provides functions similar to org-journal. I decided to stick to org-roam for the daily notes too, to keep all the notes under one umbrella. To configure daily notes, there are 2 main variables: <code>org-roam-dailies-directory</code> and <code>org-roam-dailies-capture-templates</code>. They are the path to the daily-notes and the capture templates for daily notes respectively. A sane default config taken directly from the manual is
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq org-roam-dailies-directory "daily/")
(setq org-roam-dailies-capture-templates
      '(("d" "default" entry (function org-roam--capture-get-point)
	 "* #?"
	 :file-name "daily/%&lt;%Y-%m-%d&gt;"
	 :head "#+TITLE: %&lt;%Y-%m-%d&gt;\n\n")))
</pre>
</div>

<p>
The <code>org-roam-dailies-directory</code> should appear in the <code>:file-name</code> for the notes to be recognized as daily-notes.
</p>

<p>
To start writing daily-notes, call the <code>org-roam-dailies-capture-today</code> function. It creates an entry in the notes for today. <code>org-roam-dailies-find-today</code> finds the note for today, creating it if necessary. Another important function that can be used for searching is the <code>org-roam-dailies-find-date</code> which will open the note for the particular date using a calendar.
</p>

<p>
Other functions to keep in mind:
</p>
<ul class="org-ul">
<li><code>org-roam-dailies-find-directory</code></li>
<li><code>org-roam-dailies-find-previous-note</code></li>
<li><code>org-roam-dailies-find-next-note</code></li>
</ul>
</div>
</div>

<div id="outline-container-orgf812705" class="outline-2">
<h2 id="orgf812705">Diagnosing and Repairing Files</h2>
<div class="outline-text-2" id="text-orgf812705">
<p>
Once in a while, it would be a good idea to check for the correctness of the links. To do this easily, org-roam provides the <code>org-roam-doctor</code> function. This function checks the links in the current org-roam buffer. To run it on all files, use <code>C-u M-x org-roam-doctor</code> but this might take some time.
</p>
</div>
</div>

<div id="outline-container-org6e1a922" class="outline-2">
<h2 id="org6e1a922">Finding Unlinked References</h2>
<div class="outline-text-2" id="text-org6e1a922">
<p>
It is difficult, and pointless to an extent, to try and remember all the notes to link to. For some such cases, org-roam has the <code>org-roam-unlinked-references</code>. It tries to find strings in the current buffer that match the title or aliases of any existing note in the org-roam database. These can then be converted to new links.
</p>

<p>
<b>PS</b>: Using this requires <a href="https://github.com/BurntSushi/ripgrep">ripgrep</a> with PCRE support installed on the system.
</p>
</div>
</div>

<div id="outline-container-org041df02" class="outline-2">
<h2 id="org041df02"><span class="todo NEXT">NEXT</span> Deft, org-noter, org-roam-bibtex</h2>
<div class="outline-text-2" id="text-org041df02">
</div>
<div id="outline-container-org74af671" class="outline-3">
<h3 id="org74af671">Deft</h3>
<div class="outline-text-3" id="text-org74af671">
<p>
<code>deft</code> is an interface for enhanced searching and filtering of notes. This provides a better interface to quickly go to a required note as it searches both, title and body of the note. It can be installed directly from MELPA and is fairly easy to get started with.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package deft
  :straight t
  :bind
  ("&lt;f8&gt;" . deft)
  :config
  (setq deft-directory "~/org-roam")
  (setq deft-extensions '("org" "md"))
  )
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org553d2ec" class="outline-2">
<h2 id="org553d2ec">Keybindings for <code>org-roam</code> functions</h2>
<div class="outline-text-2" id="text-org553d2ec">
<p>
I decided to create a keymap for org-roam, and I had heard about the <code>general</code> package on David Wilson's Emacs-from-scratch series so I decided to give that a shot.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package general
  :straight t
  :config
  (general-create-definer cm/leader-keys
    :prefix "M-o")

  (cm/leader-keys
   "f" 'org-roam-find-file
   "c" 'org-roam-capture
   "i" 'org-roam-insert
   "o" 'org-roam
   "M-t" 'org-roam-dailies-find-today
   "t" 'org-roam-dailies-capture-today
   "u" 'org-roam-unlinked-references)
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org2d591db" class="outline-2">
<h2 id="org2d591db"><code>use-package</code> code block</h2>
<div class="outline-text-2" id="text-org2d591db">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-roam
  :straight t
  :config
  (setq org-roam-directory "~/org-roam")
  (setq org-roam-capture-templates
	'(("d" "default" plain (function org-roam--capture-get-point)
	   "%?"
	   :file-name "%&lt;%Y%m%d%H%M%S&gt;-${slug}"
	   :head "#+TITLE: ${title}\n"
	   :unnarrowed t)
	  ("p" "paper" entry (function org-roam--capture-get-point)
	   "%?"
	   :file-name "%&lt;%Y%m%d%H%M%S&gt;-${slug}"
	   :head "#+TITLE: ${title}\n#+AUTHOR: ${authors}\n"
	   :unnarrowed t)
	  ))
  )

(use-package org-roam-protocol
  :after org-roam
  :config
  (setq org-roam-capture-ref-templates
	'(("r" "ref" plain (function org-roam-capture--get-point)
	   "%?"
	   :file-name "%&lt;%Y%m%d%H%M%S&gt;-${slug}"
	   :head "#+TITLE: ${title}\n#+roam_key: ${ref}"
	   :unnarrowed t)
	  ("w" "webpage" plain (function org-roam--capture-get-point)
	   "/${body}/"
	   :file-name "%&lt;%Y%m%d%H%M%S&gt;-${slug}"
	   :head "#+TITLE: ${title}\n#+roam_key: ${ref}\n\n"
	   :unnarrowed t)
	  ))
  )

(use-package org-roam-server
  :straight t
  :config
  (setq org-roam-server-host "127.0.0.1")
  (setq org-roam-server-port 8080)
  (setq org-roam-server-authenticate nil)
  (setq org-roam-server-export-inline-images t)
  (setq org-roam-server-serve-files nil)
  (setq org-roam-server-served-file-extensions '("pdf" "mp4" "ogv"))
  (setq org-roam-server-network-poll t)
  (setq org-roam-server-network-arrows nil)
  (setq org-roam-server-network-label-truncate t)
  (setq org-roam-server-network-label-truncate-length 60)
  (setq org-roam-server-network-label-wrap-length 20)
  (org-roam-server-mode)
  )

(use-package deft
  :straight t
  :bind
  ("&lt;f8&gt;" . deft)
  :config
  (setq deft-directory "~/org-roam")
  (setq deft-extensions '("org" "md"))
  )

</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 11 May, 2021</p>
<p class="author">Author: Chahak Mehta</p>
<p class="date">Created: 2021-05-14 Fri 19:25</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
